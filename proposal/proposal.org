#+TITLE: Learning Portfolio Optimization of Electric Vehicle Virtual Power Plants in Smart Sustainable Electricity Markets: A Reinforcement Learning Approach
#+AUTHOR:Tobias Richter

# Formatting
#+LATEX_CLASS_OPTIONS: [a4paper]
#+LATEX_HEADER: \usepackage[margin=1.5in]{geometry}
#+LATEX_HEADER: \usepackage{setspace}
#+LATEX_HEADER: \usepackage{caption}
#+LATEX_HEADER: \onehalfspacing
#+OPTIONS: H:4

# Typography
#+LATEX_HEADER: \usepackage[official]{eurosym}

# Bibliography
#+LATEX_HEADER: \usepackage[backend=biber, style=apa]{biblatex}
#+LATEX_HEADER: \addbibresource{~/uni/ma-thesis/bibliography/references.bib}

# Title & TOC
#+OPTIONS: title:nil toc:nil
#+LATEX_HEADER: \usepackage[numbib,notlof,notlot,nottoc]{tocbibind}
#+LATEX_HEADER: \pagenumbering{roman}

#+INCLUDE: "~/uni/ma-thesis/proposal/titlepage.tex" export latex

#+LATEX: \tableofcontents
#+LATEX: \clearpage
#+LATEX: \pagenumbering{arabic}

* Introduction
** Research Motivation
The global climate change is one biggest challenges of our time. Carbon
emissions need to be reduced and the shift to sustainable energy sources is
inevitable. But the integration of renewables into the electricity
grid proves to be difficult: Solar and wind energy is intermittent and hard
to integrate into the power grid. Sustainable electricity production is dependent
on the weather; under- and oversupplies occur and destabilize the grid.
# TODO: Make introduction coherent
# Electric vehicles (EV) powered by sustainable energy sources are
# Connection, Also Smart Sustainable Markets?
# The future of mobility is autonomous, connected, electric and shared.

Virtual Power Plants (VPP) play an important role in stabilizing the grid.
VPPs aggregate distributed power sources to consume and produce electricity when
it is needed. Carsharing companies operate large, centrally managed fleets of
Electric Vehicles (EV) in major cities around the world. These EV fleets can be
turned into VPPs, using their batteries as combined electricity storage.
In this way, EV fleets can offer balancing services to the power grid or trade
electricity on the open markets for arbitrage purposes.
Carsharing companies can charge the fleet (buy electricity) and discharge EVs (sell electricity) when market conditions are favorable.
By making EVs available to be used as a VPP, carsharing companies
compromise customer mobility and the profitability of the fleet. Renting out
an EV to a customer is considerably more lucrative than using it for trading electricity.

Knowing how many EVs will most likely be rented out in a future point of time
and consequently obtaining an accurate forecast of available battery capacity is essential
for a successful trading strategy. Moreover, it is possible for fleet owners to trade on
multiple electricity markets simultaneously. Electricity markets differ in
price elasticity, as well as reaction time between contractual agreement and
physical delivery.

# TODO: Citation needed
We state, that participating in operating reserve markets and spot markets at the same time
can mitigate risks and increase profits. In this research, we propose a portfolio optimizing strategy, in which the best
composition of the VPP portfolio, consisting of operating reserve
VPPs and spot market VPPs, will be dynamically learned using a /Reinforcement Learning/ (RL) approach.
An intelligent agent using RL can adapt to changing electricity price levels and customer demands.
The agent learns from historical data, its current environment and realized profits to adjust its trading strategy dynamically.

The following tasks will be performed by the agent in real-time: 1) /Allocation of plugged in
EVs to idle or VPP state/, 2) /Learn the optimal VPP portfolio
composition/ and 3) /Place bids and asks on corresponding electricity markets with an
integrated trading strategy/.

** Research Question
Drawing upon the research motivation, the following research questions are derived.
They build upon another and will be sequentially addressed during this research:

1. /What are spatio-temporal customer demand patterns of carsharing EVs?/

  Knowing customer demand patterns results in an accurate forecast of how much
  available battery capacity an EV fleet will have at any point in time.

2. /What is the optimal allocation ratio of the available capacity between operating
  reserve market VPPs and spot market VPPs?/

  Dynamically learning the optimal share of capacity to trade on the
  respective markets will maximize profits while reducing the risk of foregone
  customer profits.

    # TODO: Introduce specific markets
3. /How does an integrated bidding strategy look like, which considers trading electricity
    the secondary operating reserve market and the continuous intraday market simultaneously?/

   Designing a strategy and determine optimal auction prices, which takes the specific market
   designs into account.


* Relevance of the Research
** Relevance to Practice

From a business perspective, this research is relevant to carsharing companies operating an EV fleet, such as Car2Go or DriveNow.
We will show how these companies can increase their profits, using idle EVs as VPPs to trade
electricity on multiple markets simultaneously.

# TODO: Consider notion of different (mutually exclusive states)
# TODO: DSS not introduced yet
We propose the use of a decision support system (DSS), which allocates idle EVs to different types of VPPs or to be available for rent.
Further, the DSS will determine optimal capacity-price pairs to place ask and bid on the individual electricity markets.

# TODO: Different Section?
Using an event-based simulation we will estimate the profitability increase, when implementing the proposed methods.
This will be done using real-world data from German electricity markets and trip data from a German carsharing provider.

** Relevance to Science

From a scientific perspective, this research is relevant to the stream of agent-based decision making in smart markets parencite:bichler10_desig_smart_market,peters13_reinf_learn_approac_to_auton. We will contribute to the body of Design Science in Information Systems parencite:hevner04_desig_scien_infor_system_resear and draw upon work, which has been done in a multitude of research areas: Virtual Power Plants in smart electricity markets parencite:pudjianto07_virtual_power_plant_system_integ, carsharing as a new way of sustainable mobility and advanced machine learning and AI methods for forecasting and prediction.

Similar research has been carried out by textcite:kahlen18_elect_vehic_virtual_power_plant_dilem and textcite:kahlen17_fleet. In their papers, the authors concentrate on participating in one type of electricity market at a time. As proposed by citeauthor:kahlen18_elect_vehic_virtual_power_plant_dilem we will take this research further and use the EV VPPs to act on multiple types of electricity markets simultaneously. Moreover, we aim to use sophisticated machine learning methods (i.e. reinforcement learning, neural networks, ensemble learning) to carry out more accurate forecasts of rental demand and dynamically learn allocation ratios to the individual markets.

textcite:he16_optim_biddin_strat_batter_storag and textcite:mashhour11_biddin_strat_virtual_power_plant_2,mashhour11_biddin_strat_virtual_power_plant_1 conducted research on optimal bidding strategies for using VPPs to jointly bid on multiple markets. The authors use stationary storage to participate in day-ahead and spinning-reserve markets. Contrarily, we aim to use non-stationary storage (i.e. EV batteries) to participate in the continuous intraday market and the secondary reserve market (known as the real-time market in the US).

** Relevance to Society

This research contributes to the overall welfare of society in three points. First, VPPs of EVs provide extra balancing services to the power grid. The VPPs can consume excess electricity almost instantly and stabilize the power grid. When integrating more intermittent renewable electricity sources into the grid in the future, such balancing services will become indispensable.
# As opposed to idle-power plants or gas turbines
Second, a reduction of electricity prices for the end-consumer is expected. Integrating VPPs into the power grid increases the efficiency of the whole system and hence will  lower prices. textcite:kahlen18_elect_vehic_virtual_power_plant_dilem show results, where electricity prices decrease up to 3.4% on the wholesale market. We anticipate similar results in our research.

# TODO: Explain what curtailment means. Explain merit order, low marginal costs
Third, VPPs can lead to a decrease in CO_2 emissions. With an increasing share of renewable energy production, the supply of sustainable electricity can excess total electricity demand at times of good weather conditions. The VPPs can consume this electricity by charging the EV fleet and the sustainable energy production does not need to be curtailed. The EV fleet can then feed the electricity back into the grid when there is more demand than sustainable electricity production. Using this mechanism the total CO_2 emissions can be reduced.

* Empirical Setting

We chose to embed our research in the German carsharing and electricity market. Germany has a comparably high share of renewables in its energy mix and is pushing for an energy turnaround[fn:1] (German: /Energiewende/) since 2010. The high renewable energy content in the energy mix causes electricity prices to be more volatile, which makes Germany an attractive location for the use of VPPs. We obtained real-world trip data from Daimlers carsharing service Car2Go[fn:2] and electricity market data from the European power exchange EPEX SPOT[fn:3]. Additionally, we collected data from the German electricity market operator regelleistung.net[fn:4].

** Carsharing Fleets of Electric Vehicles

We think that the future of mobility will be electric, shared, smart and eventually autonomous. Carsharing companies are already contributing to the first two points by operating large fleets of electric vehicles. This research addresses the third point: Using EV fleets to smartly participate in electricity markets, without compromising customer mobility.
Carsharing providers like Daimler and BMW operate their carsharing fleets in a free-float model, where customers can pick up and drop vehicles at any place within the operating zone of the provider. Customers pay by the minute and are offered incentives to park EVs at charging stations. Analyzing free-float trip data is substantially more difficult than fixed trip data. Individual trips have to be reconstructed using the GPS data of the cars and predicting the rental demand is a complex matter. Demand patterns differ depending at which place and at what time the EVs are parked.
The dataset consists of 500 EVs in Stuttgart. As displayed in Table ref:car2go-sample-data the data contain spatio-temporal attributes, such as timestamp, coordinates, and address of the EVs. Additionally, status attributes of the interior and exterior are given, the relative state of charge and information whether the EV is plugged into one of the 200 charging stations in Stuttgart.

#+CAPTION: Raw Car2Go Trip Data from Stuttgart label:car2go-sample-data
#+ATTR_LATEX: :environment longtable :align l|ccccc
|--------------+----------+-----------+---------------------+----------+-----------------|
|--------------+----------+-----------+---------------------+----------+-----------------|
| Number Plate | Latitude | Longitude | Street              | Zip Code | Engine Type     |
|--------------+----------+-----------+---------------------+----------+-----------------|
| S-GO2471     | 9.19121  | 48.68895  | Parkplatz Flughafen | 70692    | electric        |
| S-GO2471     | 9.15922  | 48.78848  | Salzmannweg 3       | 70192    | electric        |
| S-GO2471     | 9.17496  | 48.74928  | Felix-Dahn-Str.45   | 70597    | electric        |
| S-GO2471     | 9.17496  | 48.74928  | Felix-Dahn-Str.45   | 70597    | electric        |
| S-GO2471     | 9.17496  | 48.74928  | Felix-Dahn-Str.45   | 70597    | electric        |
|--------------+----------+-----------+---------------------+----------+-----------------|
| Number Plate | Interior | Exterior  | Timestamp           | Charging | State of Charge |
|--------------+----------+-----------+---------------------+----------+-----------------|
| S-GO2471     | good     | good      | 22.12.2017 20:10    | no       | 94              |
| S-GO2471     | good     | good      | 24.12.2017 23:05    | no       | 72              |
| S-GO2471     | good     | good      | 26.12.2017 00:40    | yes      | 81              |
| S-GO2471     | good     | good      | 26.12.2017 00:45    | yes      | 83              |
| S-GO2471     | good     | good      | 26.12.2017 00:50    | yes      | 84              |
|--------------+----------+-----------+---------------------+----------+-----------------|
|--------------+----------+-----------+---------------------+----------+-----------------|

# TODO: Explain Sample trip (Fri, Sun, Tue, Tue, Tue)

** Electricity Markets

On electricity markets, actors participate in auctions to match the supply of electricity generation and the demand for electricity consumption. Participants place asks (sale offers) and bids (purchase orders). The price is determined by an auction mechanism, which can take different forms, depending on the type of market. Germany, like many other countries, has a liberalized energy system in which the generation and distribution of electricity are decoupled. Multiple electricity markets exist, which differ in their reaction time between the order contract and the delivery of electricity. Day-ahead and spot markets have a reaction time between a day and several hours, whereas in operating reserve markets the reaction time ranges from minutes to seconds.

The auction mechanism design is essential for electric markets parencite:kambil98_reeng_dutch_flower_auction. Electricity markets work according to the merit order principle. Resources are considered in an ascending order of the energy price until the capacity demand is met. The clearing price is determined by the energy price, at the point where supply meets demand. Payment models differ in the markets: In contrast to day-ahead market, where a uniform pricing schema is applied, in secondary reserve markets and intraday markets, bidders get compensated by the price they bid (pay-as-bid principle).

# TODO: Infrastructure constraints, not possible to offer EV batteries to the operating reserve market
Carsharing Fleets can offer the capacity of their EV batteries on multiple markets at the same time to make use of the different market properties. On operating reserve markets prices are usually more volatile and consequently more attractive for VPPs. They also bear a higher risk for the fleet; commitments have to be made one week in advance when customer demands are still of uncertain. To not face penalties for unfulfilled commitments only a conservative amount of capacity can be offered to the market. Spot markets allow participants to continuously trade electricity products up to fifteen minutes prior to delivery. At this point, it is possible to predict if an EV is likely going to be rented out with a high accuracy. This creates the possibility to trade the remaining available capacity with a low risk at the spot market.

# TODO: Include market volume, etc.
# TODO: New German Mischpreisverfahren.
*** Secondary Operating Reserve Market
In this research, we will use bidding data from the German secondary reserve market between 01.06.2016 and 01.01.2018. The data contain weekly lists of anonymized bids, where the electricity product, the offered capacity, the capacity price and the energy price of the placed bids are listed. As negative prices are allowed as well, the payment direction is included as well. Moreover, information about the amount of electricity accepted, i.e. either partially or fully, is listed. Bids which weren't accepted are not listed. An excerpt of the data can be found in Table ref:operating-reserve-data.

# TODO: Explain TSO?
#+CAPTION: List of Bids of the German Secondary Reserve Market label:operating-reserve-data
#+ATTR_LATEX: :environment longtable :align c|ccccc :placement [hp]
|---------------+----------------------+--------------------+---------------+---------------+----------------|
|---------------+----------------------+--------------------+---------------+---------------+----------------|
| Product[fn:5] | Capacity Price[fn:6] | Energy Price[fn:7] | Payment       | Offered[fn:8] | Accepted[fn:8] |
|---------------+----------------------+--------------------+---------------+---------------+----------------|
| NEG-HT        |                    0 |                1.1 | TSO to bidder |             5 |              5 |
| NEG-HT        |                    0 |                251 | TSO to bidder |            15 |             15 |
| NEG-HT        |                    0 |                564 | TSO to bidder |            22 |             22 |
| ...           |                  ... |                ... | ...           |           ... |            ... |
| NEG-NT        |                    0 |               21.9 | Bidder to TSO |             5 |              5 |
| NEG-NT        |                    0 |               22.4 | Bidder to TSO |             5 |              5 |
| ...           |                  ... |                ... | ...           |           ... |            ... |
| POS-NT        |                696.6 |               1200 | TSO to bidder |             5 |              5 |
| POS-NT        |               717.12 |               1210 | TSO to bidder |            10 |              7 |
|---------------+----------------------+--------------------+---------------+---------------+----------------|
|---------------+----------------------+--------------------+---------------+---------------+----------------|

*** Intraday Continuous Spot Market
# TODO: Trading windows times, Other types of orders, How are trades matched (equal, lower, higher)
We will embed this research in the EPEX Spot Intraday Continuous market. The data have been provided by ProCom GmbH[fn:9] and encompass order books and executed trades from 01.06.2016 till 01.01.2018. As displayed in Table ref:spot-market-sample-data, trades can have a very short lead time before delivery. Electricity products are 30-minute contracts, hourly contracts, and block contracts. The products can be traded up until 30 minutes before delivery (5 minutes in the same control area). Participants can submit limit orders at any time during the trading window and equally change or withdraw the order at any time before the order is accepted. Limit orders are specified as quantity/price pairs. When an order to buy (bid) and an order to sell (ask) is matched the trade will get executed. The order book is visible to all participants, hence it is known which unmatched orders exist at the time of interest.

#+BEGIN_EXPORT latex
{\captionsetup[table]{aboveskip=0.5cm}
#+END_EXPORT
#+CAPTION: List of Trades of the EPEX Spot Intraday Continous Market label:spot-market-sample-data
#+ATTR_LATEX: :float sideways :align c|cccccccc :placement [hp]
|---------------------+---------+-------------------+-----------------+------------+-------------+---------------+----------------+--------------|
|---------------------+---------+-------------------+-----------------+------------+-------------+---------------+----------------+--------------|
| Execution time      |      ID | Unit price[fn:10] | Quantity[fn:11] | Buyer area | Seller area | Delivery date | Product[fn:12] | Product time |
|---------------------+---------+-------------------+-----------------+------------+-------------+---------------+----------------+--------------|
| 2017-12-04 06:54:55 | 8031392 |              5100 |            5500 | Amprion    | Amprion     |    2017-12-04 | H              |        08-09 |
| 2017-12-04 06:53:26 | 8031391 |              5900 |           10000 | TenneT     | TenneT      |    2017-12-04 | H              |        08-09 |
| 2017-12-04 06:53:26 | 8031390 |              5890 |           10000 | TenneT     | TenneT      |    2017-12-04 | H              |        08-09 |
| 2017-12-04 06:53:15 | 8031389 |              5230 |            7000 | 50Hertz    | 50Hertz     |    2017-12-04 | H              |        08-09 |
| 2017-12-04 06:53:13 | 8031386 |              5900 |             500 | TenneT     | TenneT      |    2017-12-04 | H              |        08-09 |
| 2017-12-04 06:53:13 | 8031387 |              5100 |            3600 | Amprion    | Amprion     |    2017-12-04 | H              |        08-09 |
| 2017-12-04 06:53:13 | 8031388 |              5200 |            1400 | Amprion    | Amprion     |    2017-12-04 | H              |        08-09 |
| 2017-12-04 06:53:02 | 8031385 |              5890 |           11000 | TenneT     | TenneT      |    2017-12-04 | H              |        08-09 |
| 2017-12-04 06:52:38 | 8031380 |              6000 |           10000 | Amprion    | Amprion     |    2017-12-04 | H              |        08-09 |
| 2017-12-04 06:52:38 | 8031381 |              5750 |            8000 | Amprion    | Amprion     |    2017-12-04 | H              |        08-09 |
| 2017-12-04 06:52:38 | 8031382 |              5800 |            2000 | Amprion    | Amprion     |    2017-12-04 | H              |        08-09 |
| 2017-12-04 06:52:38 | 8031383 |              5890 |            4000 | TenneT     | TenneT      |    2017-12-04 | H              |        08-09 |
| 2017-12-04 06:52:38 | 8031384 |              6000 |            4000 | Amprion    | Amprion     |    2017-12-04 | H              |        08-09 |
| 2017-12-04 06:52:27 | 8031379 |              5230 |            8000 | 50Hertz    | 50Hertz     |    2017-12-04 | H              |        08-09 |
| 2017-12-04 06:51:33 | 8031378 |              6600 |            5000 | TransnetBW | TransnetBW  |    2017-12-04 | H              |        08-09 |
| 2017-12-04 06:51:28 | 8031377 |              5400 |            8000 | Amprion    | Amprion     |    2017-12-04 | H              |        08-09 |
| 2017-12-04 06:51:24 | 8031376 |              5400 |            7000 | TenneT     | TenneT      |    2017-12-04 | H              |        08-09 |
| 2017-12-04 06:49:34 | 8031375 |              5100 |            4000 | TenneT     | TenneT      |    2017-12-04 | H              |        08-09 |
| 2017-12-04 06:49:26 | 8031374 |              5400 |            5000 | 50Hertz    | 50Hertz     |    2017-12-04 | H              |        08-09 |
| 2017-12-04 06:49:23 | 8031373 |              5510 |            8000 | 50Hertz    | 50Hertz     |    2017-12-04 | H              |        08-09 |
|---------------------+---------+-------------------+-----------------+------------+-------------+---------------+----------------+--------------|
|---------------------+---------+-------------------+-----------------+------------+-------------+---------------+----------------+--------------|
#+BEGIN_EXPORT latex
}
#+END_EXPORT

* Literature Review

** Smart Charging and EV fleets

Charging whole EV fleets at the same time can overload transformers and substations, which causes severe problems to the grid parencite:kim12_carbit,sioshansi12_or_forum_model_impac_elect. A proposed solution is smart charging: To reduce peak demand EVs get charged when the grid is less congested. textcite:valogianni14_effec_manag_elect_vehic_storag find that using intelligent agents to facilitate smart charging, can substantially benefit households. textcite:kara15_estim_benef_elect_vehic_smart present results, where smart charging reduced electricity bills for users of public EV charging stations in California.
An extension of the smart charging concept is Vehicle-to-Grid (V2G). EVs equipped with V2G devices can discharge their batteries back into the grid. textcite:schill11_elect_vehic_imper_elect_market find that EVs can be beneficial for consumer electricity prices when they are used as storage. Similar results were shown by
textcite:reichert10_consid_highl_effic_bidir_batter and textcite:peterson10_econom_using_plug_in_hybrid, but they point out that battery technology and battery costs are a crucial factor for profitability. textcite:tomic07_using_fleet_elect_drive_vehic_grid_suppor show that V2G can profitable, especially when there is a high variability in electricity prices on the market. They state that shorter intervals between sale and physical delivery increase the benefits.

Successful trading strategies to jointly participate in multiple markets have been found by textcite:mashhour11_biddin_strat_virtual_power_plant_2. Using stationary storage the authors use VPPs to participate in the spinning reserve market and day-ahead market at the same time. Similar research has been done by textcite:he16_optim_biddin_strat_batter_storag. The authors take the battery life cycle into account, which proves to be a decisive factor. In this thesis, we aim to jointly participate in the operating reserve and spot market with non-stationary storage, while considering the battery life cycle as well. Following the findings of textcite:tomic07_using_fleet_elect_drive_vehic_grid_suppor, we choose the intraday continuous market over the day-ahead market, as it has the lowest reaction time of spot markets.

# TODO: Extend section on intelligent agents and electricity brokers, state that we are applying this concept with VPP on top.
Previous studies often make the assumption that car owners or households can directly trade on electricity markets. In reality, this is not possible due to minimum capacity requirements of the markets. For example, the German secondary reserve market has a 1 MWh minimum trading capacity, while the maximum battery capacity of i.e. a /Smart ForTwo Electric/ is 16.50 kWh. textcite:ketter13_power_tac introduced the notion of electricity brokers, intelligent agents that act on behalf of a group of individuals or households to participate on electricity markets. textcite:brandt17_evaluat_busin_model_vehic_grid_integ and textcite:kahlen14_balan_with_elect_vehic successfully showed in simulations that electricity brokers can overcome the capacity issues by aggregating distributed electricity sources.

Carsharing companies operate large EV fleets, which can be used as VPPs to participate on electricity markets. We look at the concept of free-float carsharing, an approach which offers more flexibility to its users, saves resources and reduces carbon emissions parencite:firnkorn15_free_float_elect_carsh_fleet_smart_cities. In most previous studies concerning using EVs for electricity trading, it was assumed that trips were fixed and known in advance. The free-float concept adds uncertainty and nondeterministic behavior, as cars can be picked up and parked everywhere and billing is done by the minute. Consequently predicting when and where a car is going to be rented out is a complex issue, which e.g. textcite:wagner16_in_free_float address by using points of interests from Google Maps.

textcite:kahlen17_fleet showed that is possible to use free-floating carsharing fleets as VPPs to profitably offer balancing services to the grid. The authors also showed that with a similar approach, carsharing companies can participate on day-ahead markets for arbitrage purposes parencite:kahlen18_elect_vehic_virtual_power_plant_dilem. A central dilemma within this research is to decide whether an EV should be committed to being charged or discharged or to be free for rent. Rental profits are considerably higher than the profits to be made of electricity trading. Moreover, offering capacity to the grid, which you can not provide results in heavy penalties, that should be avoided at all costs. To address this issue, the authors make use of asymmetric objective functions that heavily penalize committing an EV to a VPP, when it would have been rented otherwise. Therefore only very conservative estimations and commitments of available overall capacity to be traded on the markets are made. This results in a high amount of foregone profits when bidding on the balancing market. citeauthor:kahlen15_aggreg_elect_cars_sustain_virtual_power_plant state that in 42% to 80% of the time EVs are /not/ committed to a VPP when it would have been profitable (i.e. the EV has not been rented out). We are proposing a solution, in which the EV fleet participates on the balancing market and intraday market simultaneously. This way we aim to align the potentially higher profits on the balancing markets with accurate capacity estimations, which can be made on intraday markets. We follow citeauthor:kahlen15_aggreg_elect_cars_sustain_virtual_power_plant here, which propose a combination of multiple markets in future work.

** Electricity Price Forecasting and Neural Networks

In review papers of electricity price forecasting techniques Neural Networks (NN) play an essential role. textcite:aggarwal09_elect_price_forec_dereg_market found that 17 papers, which have published in relevant journals at the time, use NN models (including recurrent NN, and fuzzy NN) to forecast electricity prices. In comparison only 12 papers covered time-series and causal models. In a more recent review paper, textcite:weron14_elect_price_forec consider categorical sets of papers, where 95 papers were belonging to the 'neural network' category and 100 papers to the 'statistical time series' category. This shows the relevance of advanced AI and deep learning methods for electricity markets. To the best of our knowledge, these methods have not been considered for bidding on multiple electricity markets with EV fleets yet, as we aim to do. Another promising approach is the use of ensemble forecasting, where a number of forecasts are evaluated together to provide less risky predictions parencite:avci18_manag_elect_price_model_risk.


** Reinforcement Learning in Smart Grids

Previous research shows that intelligent agents equipped with Reinforcement Learning methods can successfully take action in the smart grid. textcite:reddy11_strat,reddy11_learn_behav_multip_auton_agent show that autonomous broker agents parencite:ketter13_power_tac can learn their strategies using RL. textcite:peters13_reinf_learn_approac_to_auton build on that work and further enhance the method, by learning over larger state spaces to accommodate arbitrary economic signals. This is especially beneficial in smart markets, because they might change in their structure in the future and intelligent agents should adapt to a variety of market structures and conditions.
textcite:valogianni14_effec_manag_elect_vehic_storag adopt RL methods to learn electricity consumption behavior of households. The authors implement these methods in intelligent agents to smart charge EVs more effectively. textcite:vandael15_reinf_learn_heuris_ev_fleet use RL to learn collective EV fleet charging behavior to profitably purchase electricity on the day-ahead market. Reinforcement Learning constitutes a fitting solution for our Research Question 2. When dynamically optimizing the VPP portfolio composition of the fleet, there is no historical data available we could train a model with. Using RL and a reward function that maximizes the overall profitability of the fleet, the agent can learn from its environment with unknown dynamics and take a certain set of actions. The agent considers different states (e.g. current and forecasted rental demand levels and electricity prices) to take actions (e.g. allocate battery capacity to different types of VPPs) that maximizes the reward function.

* Research Design
The research will be structured using the IS design science principles proposed citeauthor:hevner04_desig_scien_infor_system_resear
al. (2004). In Figure ref:research-design the proposed research design is depicted.
We will place a special focus on the used methodologies, the developed artifact
and the evaluation of the results.
Drawing from the /Knowledge Base/, multiple methods will be compared and evaluated against each
other and thus emphasizing /Research Rigor/. Considering /Business Needs/, we
will develop an /Artifact/ in form of a decision support system. Evaluating
the results with real-world data with a simulation will make sure the /Artifact/
is /applicable in the appropriate environment/ (i.e. carsharing fleets).

#+CAPTION: Research Design following Hevner et al., 2004  label:research-design
[[./figures/Hevner_Proposal.png]]
** Problem relevance: Environmental (People), carsharing (Business)
** Methodologies
Draw upon well researched statistical and machine learning methods: statistical pattern recognition, time-series forecasting and artificial neural networks.
*** Quantitative Study
- What is the purpose of the study?
 1. EV Capacity Prediction / Demand Prediction
 2. Dynamic VPP Allocation Learning
 3. Determine Bids/Asks/Market: Price Prediction
*** ML-based Intelligent Agents
** Artifact: Instantiation of an intelligent agent.
- Thus: An intelligent Agent is needed, which dynamically allocates parked, plugged-in EVs to be
 used as VPP or stay idle, depending whether an EV is likely going to be rented out and how much
 capacity it has available.
** Evaluation: Event-based simulation using real-world data
-Using real-world data from German electricity markets and trip data from a carsharing provider.

#+LATEX: \clearpage
#+LATEX: \printbibliography

* Footnotes

[fn:1] citetitle:energiewende2010, cite:energiewende2010.

[fn:2] https://www.car2go.com

[fn:3] https://www.epexspot

[fn:4] https://www.regelleistungen.net

[fn:5] NEG-NT = Product code for negative secondary control reserve to be
provided between the hours of 00:00h and 08:00h as well as between 20:00h and
24:00h from Monday to Friday as well as all day on Saturday, Sunday and public holidays
applicable to all of Germany.
POS-HT = Product code for positive secondary control reserve to be provided between the hours of 08:00h and 20:00h from
Monday through Friday.

[fn:6] Capacity prices are in given in
#+BEGIN_EXPORT latex
\euro{}/MW.
#+END_EXPORT

[fn:7] Energy prices are in given in
#+BEGIN_EXPORT latex
\euro{}/MWh.
#+END_EXPORT

[fn:8] Capacities are given in MW.

[fn:9] https://procom-energy.de/

[fn:10] Unit prices are given in
#+BEGIN_EXPORT latex
\euro{}c/MWh.
#+END_EXPORT

[fn:11] Quantities are given in kW.

[fn:12] Products: are: H = Hourly, Q = Quarterly and B = Block.

